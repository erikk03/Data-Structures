![run-tests](../../workflows/run-tests/badge.svg)

## 2021 Project 1

Εκφώνηση: https://k08.chatzi.org/projects/project1/


### Προσωπικά στοιχεία

__Όνομα__: ΚΑΓΙΑΤΣΚΑ ΕΡΙΚ

__Α.Μ.__: sdi2100043

### Ασκήσεις που παραδίδονται

- Ασκηση 1
- Ασκηση 2
- Ασκηση 3
- Ασκηση 4
- Ασκηση 5
- Ασκηση 6
- Design Competition

### Documentation

- _Ασκηση1_
Υλοποιησα τις συναρτησεις state_info και state_objects.
Στην state_objects δημιουργω μια λιστα, διασχιζω την λιστα state->objects, και τα αντικειμενα που βρισκονται αναμεσα στο y_from και y_to τα προσθετω στην λιστα που δημιουργησα.
Επιστρεφω την λιστα που δημιουργησα.

- _Ασκηση2_
Υλοποιησα την συναρτηση state_update.
Αρχικα, ρυθμισα την κινηση του αεροσκαφους και των εχθρων, με βαση παντα τα πληκτρα που ειναι πατημενα.
Αναλογα τα πληκτρα που παταει ο χρηστης, οι συντεταγμενες αλλαζουν καταλλληλα, αφου η κινηση εξαρταται απο αυτες.
Στην συνεχεια, κανω ελεγχο για τυχον συγκρουσεις μεταξυ του αεροσκαφους με εδαφος, εχθρο η γεφυρα.
Επισης, ελεγχω για συγκρουσεις μεταξυ των εχθρων με το εδαφος.
Οταν οι συντεταγμενες των αντικειμενων συμπιπτουν τοτε εχουμε συγκρουση.
Οι συγκρουσεις ελεγχονται με την χρηση της συναρτησης CheckCollisionRecs.
Αναλογα τα αντικειμενα που συγκρουονται, γινονται και οι καταλληλες ενεργειες.
Τελος, ρυθμισα την εκκινηση και διακοπη του παιχνιδιου, οταν τα καταλληλα πληκτρα ειναι πατημενα.

- _Ασκηση3_
Ολοκληρωσα την υλοποιηση της συναρτησης state_update.
Αρχικα, οταν ειναι πατημενο το space και δεν υπαρχει αλλος πυραυλος ενεργος, δημιουργειται ενας πυραυλος.
Ο πυραυλος δημιουργειται ακριβως πανω απο το αεροσκαφος και κινειται με ταχυτητα 10 px ανα frame, αρα αλλαζουν οι συντεταγμενες του.
Στην συνεχεια, οσο αφορα τις συγκρουσεις του πυραυλου με το εδαφος, τους εχθρους και τις γεφυρες.
Οταν γινει καποια συγκρουση ο πυραυλος καταστρεφεται.
Αν υπαρχει συγκρουσει με γεφυρα η εχθρο, τοτε καταστρεφεται και το συγκεκριμενο αντικειμενο.
Για να συμβει αυτο, αποθηκευω καθε φορα το προηγουμενο στοιχειο της λιστας, ετσι ωστε χρησιμοποιωντας την συναρτηση list_remove_next να αφαιρειται απο την λιστα το συγκεκριμενο στοιχειο.
Επιπλεον, κανω την πιστα να ειναι "απειρου" μηκους.
Για να συμβει αυτο, βρισκω το συνολικο πληθος γεφυρων που υπαρχουν στη λιστα.
Για να συνεχιστει το παιχνιδι ειναι αναγκαια προυποθεση να υπαρξει συγκρουση μεταξυ πυραυλου και γεφυρας.
Οποτε, σε καθε τετοια συγκρουση αφαιρω μια γεφυρα απο το συνολικο αριθμο γεφυρων.
Οταν εχει απομεινει μια μονο γεφυρα, δηλαδη η τελευταια της λιστας, καλω την συναρτηση add_objects και δημιουργω ετσι νεα αντικειμενα, αυξανοντας και την ταχυτητα του παιχνιδιου κατα 30%.
`Η συγκεκριμενη υλοποιηση επεσε στα 35-40 fps οταν υπηρχαν 500-1000 γεφυρες`

- _Ασκηση4_
Υλοποιησα τις συναρτησεις set_find_equal_or_greater και set_find_equal_or_smaller.
Για να βρω το μεγαλυτερο, αντιστοιχα το μικροτερο, στοιχειο μια λιστας με εναν αποδοτικο τροπο εργαστηκα ως εξης:
Αρχικα, καλω την συναρτηση set_find. Α ν η τιμη που επιστρεψει ειναι διαφορετικη του NULL, δηλαδη αν υπαρχει το στοιχειο που ψαχνουμε, το επιστρεφουμε.
Αν δεν υπαρχει το στοιχειο, το προσθετουμε στη λιστα με την χρηση της συναρτησης set_insert.
Αρα το αμεσως προηγουμενο στοιχειο ειναι το μεγαλυτερο, και το αμεσως επομενο ειναι αντιστοιχα το μικροτερο, δεδομενου οτι το Set θα το ταξινομουμε με φθινουσα σειρα.
Επιστρεφουμε επομενως τα στοιχεια αυτα, και διαγραφουμε το στοιχειο που προσθεσαμε εμεις στο Set.
Σε περιπτωση που δεν υπαρχει μεγαλυτερο, αντιστοιχα μικροτερο στοιχειο απο αυτο που ψαχνουμε, επιστρεφουμε NULL.

- _Ασκηση5_
Εναλλακτικη υλοποιηση του module state.c.
Αρχικα, υλοποιω την συναρτηση state_objects.
Προκειμενου να επιστρεψω μια λιστα με τα αντικειμενα που βρισκονται αναμεσα στα y_from/y_to, χρησιμοποιω τις συναρτησεις της ασκησης 4.
Βρισκω το πρωτο στοιχειο με συντεταγμενες ισες η αμεσως μικροτερες του y_from.
Βρισκω επισης το στοιχειο με συντεταγμενες ισες η αμεσως μεγαλυτερες του y_to.
Τα στοιχεια που βρισκονται αναμεσα σε αυτα τα 2 αντικειμενα ειναι αυτα που θα προσθεσουμε στη λιστα, την οποια θα επιστρεψουμε.
Στην συνεχεια, για την υλοποιηση της state_update, αντι να κανουμε διασχιση ολοκληρου του Σετ, δημιουργουμε μια λιστα.
Η λιστα αυτη περιλαμβανει τα αντικειμενα που βρισκονται εως 2 οθονες μακρια απο το αεροσκαφος.
Αυτο γινεται μεσω της κλησης της συναρτησης state_objects ποτ υλοποιησαμε προηγουμενως.
`Η συγκεκριμενη υλοποιηση επεσε στα 35-45 fps οταν υπηρχαν 30000-35000 γεφυρες`

- _Ασκηση6_
Στο σημειο αυτο γινεται η υλοποιηση του interface.
Η διαδικασια ειναι απλη. Αρχικοποιουμε το interface του παιχνιδιου, σχεδιαζουμε ενα frame με την τωρινη κατασταση του state, και τελος κλεινουμε το interface.
Το βασικο σημειο ειναι η συναρτηση interface_draw_frame και η update_and_draw.
Το σκεπτικο ειναι αρχικα να κανουμε ενα ελεγχο για το ποια πληκτρα ειναι πατημενα καθε φορα.
Στην συνεχεια, φτιαχνουμε ενα y_offset το οποιο χρησιμοποιειται για την μετατροπη των συντεταγμενων του state σε οθονης.
Επειδη εγω φορτωνω συγκεκριμενες εικονες που θα χρησιμοποιηθουν για αναπαρασταση των αντικειμενων, αλλαζω τις διαστασεις των αντικειμενων στο state ωστε να συμπιπτουν με τις συντεταγμενες των εικονων και να ειναι πιο ομαλο το παιχνιδι.
Τελος, σχεδιαζουμε το σκορ και τα FPS και αναπαραγουμε ενα ηχο σε περιπτωση του game_over.

-_DesignCompetition_
Προσθηκη ενος μενου πριν αρχισει το παιχνιδι.
Υπαρχει πλεον η επιλογη οι παικτες να κοιταξουν απαραιτητες οδηγιες πριν αρχισει το παιχνιδι.  
Αφου χασει ο παικτης υπαρχει επιλογη να ξαναπαιξει, αλλα και να παει πισω στο μενου.
Προσθηκη διαμαντιων στο παιχνιδι. Η συλλογη τους αυξανει το σκορ +5 και αυξανει τον αριθμο διαμαντιων που συλλεχτηκαν.
Τα PixelArt που χρησιμοποιουνται εχουν δημιουργηθει απο εμενα με την χρηση καταλληλης εφαρμογης.
Οι ηχοι που χρησιμοποιουνται εχουν γινει download απο την σελιδα: https://pixabay.com/sound-effects/.

- _ΤΕΣΤ_
Για καθε ασκηση υπαρχουν διαφοροι ελεγχοι που γινονται στο αρχειο tests/state_test.c, ωστε να γινεται ελεγχος για τις περισσοτερες λειτουργιες του project.
Για την ασκηση 1 ελεγχω την σωστη λειτουργια των συναρτησεων state_create και state_objects.
Για την ασκηση 2 γινεται ελεγχος της state_update, οσο αφορα την μετακινηση του αεροσκαφους αναλογα τα πατημενα πληκτρα.
Για την ασκηση 3 συνεχιζεται ο ελεγχος της state_update, αυτη τη φορα οσο αφορα την κινηση του πυραυλου και την συγκρουση του με εχθρο.
Για την ασκηση 4 δημιουργειται ενα Set, ταξινομημενο με φθινουσα σειρα, και ελεγχεται η σωστη λειτουργια των συναρτησεων στο αρχειο modules/set_utils.c.